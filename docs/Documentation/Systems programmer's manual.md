# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
# –°–∏—Å—Ç–µ–º–∞ "–£–º–Ω—ã–π –î–æ–º"

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
3. [–ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã](#–º–æ–¥—É–ª–∏-—Å–∏—Å—Ç–µ–º—ã)
4. [–ó–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#–∑–∞–ø—É—Å–∫-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
5. [–†–∞–±–æ—Ç–∞ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º](#—Ä–∞–±–æ—Ç–∞-—Å-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏)
6. [API –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã](#api-–∏-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
8. [–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è](#—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ-–∏-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)
9. [–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è](#—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è-–∏-–æ–ø–æ–≤–µ—â–µ–Ω–∏—è)
10. [–û—Ç–ª–∞–¥–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π](#–æ—Ç–ª–∞–¥–∫–∞-–∏-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)

---

## 1. –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã <a name="–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã"></a>

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ "–£–º–Ω—ã–π –î–æ–º" –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ –¥–æ–º–µ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–ª–∏–º–∞—Ç–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∫–∞–º–µ—Ä—ã, –¥–∞—Ç—á–∏–∫–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö

### 1.2 –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–í–µ—Ä—Å–∏—è**: 1.0.0
- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: Python 3.8+
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è, —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –û–°**: Windows, Linux, macOS

### 1.3 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8 –∏–ª–∏ –≤—ã—à–µ
- 2 –ì–ë –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (–º–∏–Ω–∏–º—É–º)
- 100 –ú–ë —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã <a name="–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã"></a>

### 2.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
–£–º–Ω—ã–π –î–æ–º (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
‚îú‚îÄ‚îÄ Core Layer (–Ø–¥—Ä–æ)
‚îÇ   ‚îú‚îÄ‚îÄ HomeController (–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ Settings (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ ConsoleInterface (–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
‚îÇ
‚îú‚îÄ‚îÄ Device Layer (–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
‚îÇ   ‚îú‚îÄ‚îÄ BaseDevice (–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
‚îÇ   ‚îú‚îÄ‚îÄ SmartLight (–£–º–Ω–∞—è –ª–∞–º–ø–∞)
‚îÇ   ‚îú‚îÄ‚îÄ Thermostat (–¢–µ—Ä–º–æ—Å—Ç–∞—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ SecurityCamera (–ö–∞–º–µ—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
‚îÇ   ‚îú‚îÄ‚îÄ SmokeSensor (–î–∞—Ç—á–∏–∫ –¥—ã–º–∞)
‚îÇ   ‚îî‚îÄ‚îÄ WaterLeakSensor (–î–∞—Ç—á–∏–∫ –ø—Ä–æ—Ç–µ—á–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ Service Layer (–°–µ—Ä–≤–∏—Å—ã)
‚îÇ   ‚îú‚îÄ‚îÄ DeviceManager (–ú–µ–Ω–µ–¥–∂–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
‚îÇ   ‚îú‚îÄ‚îÄ EventBus (–®–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ LoggingService (–°–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ NotificationService (–°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ ScheduleService (–°–µ—Ä–≤–∏—Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ AutomationService (–°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ EmailService (–°–µ—Ä–≤–∏—Å email)
‚îÇ   ‚îî‚îÄ‚îÄ StateStorage (–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π)
‚îÇ
‚îî‚îÄ‚îÄ UI Layer (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
    ‚îú‚îÄ‚îÄ SmartHomeGUI (–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
    ‚îî‚îÄ‚îÄ ConsoleInterface (–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
```

### 2.2 –ü–æ—Ç–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á:

1. **–û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫** - –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **–ü–æ—Ç–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
3. **–ü–æ—Ç–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ü–æ—Ç–æ–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
5. **–ü–æ—Ç–æ–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–≤–∏–∂–µ–Ω–∏–µ)

### 2.3 –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
```
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Üí DeviceManager ‚Üí EventBus ‚Üí HomeController
                                     ‚Üì
                –°–µ—Ä–≤–∏—Å—ã (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, email)
                                     ‚Üì
                               –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

---

## 3. –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã <a name="–º–æ–¥—É–ª–∏-—Å–∏—Å—Ç–µ–º—ã"></a>

### 3.1 Core Layer (–Ø–¥—Ä–æ)

#### 3.1.1 HomeController (`core/home_controller.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
start_system()      # –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
stop_system()       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
setup_event_handlers() # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
```

#### 3.1.2 Settings (`config/settings.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `SYSTEM_NAME`: –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `VERSION`: –í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã
- `DEVICE_UPDATE_INTERVAL`: –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (—Å–µ–∫)
- `LOG_RETENTION_DAYS`: –í—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ (–¥–Ω–µ–π)
- `DEFAULT_DEVICES`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 3.2 Device Layer (–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)

#### 3.2.1 BaseDevice (`devices/base_device.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
turn_on()    # –í–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
turn_off()   # –í—ã–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
toggle()     # –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

**–û–±—â–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã**:
- `device_id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `name`: –ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `state`: –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ("on"/"off")
- `data`: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `capabilities`: –°–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥

#### 3.2.2 –¢–∏–ø—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**SmartLight** (`devices/lighting/smart_light.py`):
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç—å—é (0-100%)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π (2700K-6500K)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–º (HEX)
- –°–∏–º—É–ª—è—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

**Thermostat** (`devices/climate/thermostat.py`):
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (15-30¬∞C)
- –ü–ª–∞–≤–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–µ–ª–µ–≤–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

**SecurityCamera** (`devices/security/security_camera.py`):
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è (—Å–∏–º—É–ª—è—Ü–∏—è)
- –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è

**SmokeSensor** (`devices/security/smoke_sensor.py`):
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∑–∞–¥—ã–º–ª–µ–Ω–∏—è
- –¢—Ä–µ–≤–æ–∂–Ω–∞—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**WaterLeakSensor** (`devices/security/water_leak_sensor.py`):
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–µ—á–µ–∫
- –¢—Ä–µ–≤–æ–∂–Ω–∞—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 3.3 Service Layer (–°–µ—Ä–≤–∏—Å—ã)

#### 3.3.1 DeviceManager (`devices/device_manager.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–π

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
add_device(device)            # –î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
get_device(device_id)         # –ü–æ–ª—É—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
send_command(device_id, action) # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
save_state()                  # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
restore_state()               # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

#### 3.3.2 EventBus (`services/event_bus.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –®–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã**: –ü–∞—Ç—Ç–µ—Ä–Ω "–ò–∑–¥–∞—Ç–µ–ª—å-–ü–æ–¥–ø–∏—Å—á–∏–∫"

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è**:
- `DEVICE_STATE_CHANGED`: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `NOTIFICATION_CREATED`: –°–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `SYSTEM_ERROR`: –û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã

**–ú–µ—Ç–æ–¥—ã**:
```python
subscribe(event_type, callback) # –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
publish(event_type, data)       # –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
```

#### 3.3.3 LoggingService (`services/logging_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–∏–ø—ã –ª–æ–≥–æ–≤**:
- `SYSTEM`: –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `DEVICE`: –°–æ–±—ã—Ç–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `SERVER`: –°–æ–±—ã—Ç–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- `CLIENT`: –°–æ–±—ã—Ç–∏—è –∫–ª–∏–µ–Ω—Ç–∞

**–§—É–Ω–∫—Ü–∏–∏**:
- –ó–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª (`logs/smart_home.log`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (7 –¥–Ω–µ–π)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –ø–æ —Ç–∏–ø—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤

#### 3.3.4 ScheduleService (`services/schedule_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

**–§–æ—Ä–º–∞—Ç –∑–∞–¥–∞—á**:
```json
{
  "08:00": [
    {
      "device_id": "lamp_living_room",
      "action": "on",
      "enabled": true,
      "days": [0, 1, 2, 3, 4]
    }
  ]
}
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã**:
- –ü—Ä–æ—Å—Ç—ã–µ: `on`, `off`, `toggle`
- –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: `set_temperature:22`, `set_brightness:80`
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ: `on_and_set_temperature:22`

#### 3.3.5 EmailService (`services/email_service.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–ø—Ä–∞–≤–∫–∞ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
```python
SMTP_SERVER = "smtp.gmail.com"
SMTP_PORT = 587
SENDER_EMAIL = "–≤–∞—à_email@gmail.com"
SENDER_PASSWORD = "–≤–∞—à_–ø–∞—Ä–æ–ª—å"
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```python
email_service.send_alert("–ó–∞–≥–æ–ª–æ–≤–æ–∫", "–°–æ–æ–±—â–µ–Ω–∏–µ")
```

### 3.4 UI Layer (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

#### 3.4.1 SmartHomeGUI (`ui/smart_home_gui.py`)
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è**: Tkinter

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
1. **–ü–∞–Ω–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤**: –ö–∞—Ä—Ç–æ—á–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
2. **–í–∫–ª–∞–¥–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**:
   - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
   - –õ–æ–≥–∏
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
   - –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏
3. **–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**: –ü–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

#### 3.4.2 ConsoleInterface (`ui/console_interface.py`)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã**:
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
- –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

---

## 4. –ó–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ <a name="–∑–∞–ø—É—Å–∫-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞"></a>

### 4.1 –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

#### 4.1.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd smart-home-system

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

#### 4.1.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã** (`config/settings.py`):
```python
class Settings:
    def __init__(self):
        self.SYSTEM_NAME = "Smart Home System"
        self.VERSION = "1.0.0"
        self.DEVICE_UPDATE_INTERVAL = 2  # —Å–µ–∫—É–Ω–¥—ã
        self.LOG_RETENTION_DAYS = 30
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ email** (`services/email_service.py`):
```python
class EmailService:
    def __init__(self):
        self.smtp_server = "smtp.gmail.com"
        self.smtp_port = 587
        self.sender_email = "–≤–∞—à_email@gmail.com"
        self.sender_password = "–≤–∞—à_–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
        self.receiver_email = "–ø–æ–ª—É—á–∞—Ç–µ–ª—å@gmail.com"
```

**–í–∞–∂–Ω–æ**: –î–ª—è Gmail –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ –Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å.

### 4.2 –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### 4.2.1 –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫
python main.py

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫
python ui/smart_home_gui.py
```

#### 4.2.2 –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
python -c "from ui.console_interface import ConsoleInterface; \
           from core.home_controller import HomeController; \
           controller = HomeController(); \
           controller.start_system(); \
           console = ConsoleInterface(controller); \
           console.display_main_menu()"
```

#### 4.2.3 –ó–∞–ø—É—Å–∫ –∫–∞–∫ —Å–ª—É–∂–±—ã (Linux)
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–ª—É–∂–±—ã
sudo nano /etc/systemd/system/smart-home.service

# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
[Unit]
Description=Smart Home System
After=network.target

[Service]
Type=simple
User=–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
WorkingDirectory=/–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É
ExecStart=/usr/bin/python3 /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–ª—É–∂–±—ã
sudo systemctl enable smart-home.service
sudo systemctl start smart-home.service
```

### 4.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 4.3.1 `device_state.json`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/data/device_state.json`

**–§–æ—Ä–º–∞—Ç**:
```json
{
  "lamp_living_room": {
    "type": "lamp",
    "state": "on",
    "data": {
      "brightness": 80,
      "color_temp": 4000
    }
  }
}
```

#### 4.3.2 `schedule.json`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**–§–æ—Ä–º–∞—Ç**: –°–º. —Ä–∞–∑–¥–µ–ª 3.3.4

#### 4.3.3 `smart_home.log`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `logs/smart_home.log`

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤**:
```
[2024-01-15 14:30:45] SYSTEM: üöÄ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
[2024-01-15 14:30:46] DEVICE: –î–æ–±–∞–≤–ª–µ–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: –°–≤–µ—Ç –≤ –≥–æ—Å—Ç–∏–Ω–æ–π
```

---

## 5. –†–∞–±–æ—Ç–∞ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ <a name="—Ä–∞–±–æ—Ç–∞-—Å-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏"></a>

### 5.1 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

#### 5.1.1 –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```python
from devices.base_device import BaseDevice

class NewDevice(BaseDevice):
    def __init__(self, device_id, name):
        super().__init__(device_id, name, "new_type")
        
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        self.data["custom_field"] = "–∑–Ω–∞—á–µ–Ω–∏–µ"
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
        self.capabilities.extend(["custom_command"])
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
        self.metadata.update({
            "min_value": 0,
            "max_value": 100
        })
    
    def turn_on(self):
        self.state = "on"
        self.emit_event("state_changed", {"state": "on"})
        return True
    
    def turn_off(self):
        self.state = "off"
        self.emit_event("state_changed", {"state": "off"})
        return True
    
    def toggle(self):
        if self.state == "on":
            return self.turn_off()
        else:
            return self.turn_on()
    
    def custom_command(self, value):
        """–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞"""
        if self.min_value <= value <= self.max_value:
            self.data["custom_field"] = value
            self.emit_event("custom_changed", {"value": value})
            return True
        return False
```

#### 5.1.2 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–∏—Å—Ç–µ–º–µ

```python
# –í DeviceManager._initialize_devices()
def _initialize_devices(self):
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    self.add_device(SmartLight("lamp_living_room", "–°–≤–µ—Ç –≤ –≥–æ—Å—Ç–∏–Ω–æ–π"))
    self.add_device(Thermostat("thermostat", "–¢–µ—Ä–º–æ—Å—Ç–∞—Ç"))
    
    # –ù–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
    self.add_device(NewDevice("new_device", "–ù–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"))
```

### 5.2 –ö–æ–º–∞–Ω–¥—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### 5.2.1 –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```python
# –í–∫–ª—é—á–µ–Ω–∏–µ
device_manager.send_command("device_id", "on")

# –í—ã–∫–ª—é—á–µ–Ω–∏–µ
device_manager.send_command("device_id", "off")

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
device_manager.send_command("device_id", "toggle")
```

#### 5.2.2 –ö–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
device_manager.send_command("thermostat", "set_temperature:22")

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —è—Ä–∫–æ—Å—Ç–∏
device_manager.send_command("lamp_living_room", "set_brightness:80")

# –í–∫–ª—é—á–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
device_manager.send_command("thermostat", "on_and_set_temperature:22")
```

#### 5.2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```python
device = device_manager.get_device("device_id")
if device and device.can_execute("command"):
    # –ö–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
    success = device_manager.send_command("device_id", "command")
```

### 5.3 –°–∏–º—É–ª—è—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### 5.3.1 –ü—Ä–∏–Ω—Ü–∏–ø —Å–∏–º—É–ª—è—Ü–∏–∏
–ö–∞–∂–¥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏:
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞**: –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- **–î–≤–∏–∂–µ–Ω–∏–µ**: –°–ª—É—á–∞–π–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å —Ä–∞–∑–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
- **–Ø—Ä–∫–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞

#### 5.3.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏
```python
class SmartDevice(BaseDevice):
    def __init__(self, device_id, name):
        super().__init__(device_id, name, "smart")
        
        # –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
        self._simulation_thread = None
        self._stop_simulation = threading.Event()
    
    def turn_on(self):
        self.state = "on"
        self._start_simulation()  # –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
        return True
    
    def turn_off(self):
        self.state = "off"
        self._stop_simulation()   # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏
        return True
    
    def _simulation_loop(self):
        while not self._stop_simulation.wait(5):
            if self.state == "on":
                self._simulate_behavior()
    
    def _start_simulation(self):
        if not self._simulation_thread or not self._simulation_thread.is_alive():
            self._stop_simulation.clear()
            self._simulation_thread = threading.Thread(
                target=self._simulation_loop,
                daemon=True
            )
            self._simulation_thread.start()
    
    def _stop_simulation(self):
        if self._simulation_thread and self._simulation_thread.is_alive():
            self._stop_simulation.set()
            self._simulation_thread.join(timeout=2)
```

---

## 6. API –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã <a name="api-–∏-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã"></a>

### 6.1 –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### 6.1.1 HomeController API

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞**:
```python
from core.home_controller import HomeController

controller = HomeController()
controller.start_system()
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π
controller.start_system()
controller.stop_system()

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
devices = controller.get_devices()
status = controller.get_device_status("device_id")
success = controller.send_command("device_id", "action")

# –í–∞–ª–∏–¥–∞—Ü–∏—è
is_valid_temp = controller.set_temperature(22)
is_valid_brightness = controller.set_brightness(80)
is_valid_pin = controller.validate_pin("1234")
is_valid_energy = controller.set_energy_limit(1000)
```

#### 6.1.2 DeviceManager API

**–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞**:
```python
device_manager = controller.device_manager
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
device_manager.add_device(device)
device = device_manager.get_device("device_id")
all_devices = device_manager.get_all_devices_status()

# –ö–æ–º–∞–Ω–¥—ã
success = device_manager.send_command("device_id", "action")

# –°–æ—Å—Ç–æ—è–Ω–∏—è
device_manager.save_state()
device_manager.restore_state()
device_manager.start_auto_save(interval_minutes=5)
```

#### 6.1.3 EventBus API

**–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è**:
```python
def event_handler(data):
    print(f"–°–æ–±—ã—Ç–∏–µ: {data}")

event_bus = controller.event_bus
event_bus.subscribe(EventBus.DEVICE_STATE_CHANGED, event_handler)
```

**–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π**:
```python
event_bus.publish("custom_event", {"key": "value"})
```

### 6.2 –§–∞–π–ª–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### 6.2.1 –°–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–ß—Ç–µ–Ω–∏–µ**:
```python
from services.storage_service import StateStorage

storage = StateStorage()
states = storage.load()
```

**–ó–∞–ø–∏—Å—å**:
```python
states = {
    "device_id": {
        "type": "device_type",
        "state": "on",
        "data": {"field": "value"}
    }
}
storage.save(states)
```

#### 6.2.2 –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
**–ß—Ç–µ–Ω–∏–µ**:
```python
import json

with open("schedule.json", "r", encoding="utf-8") as f:
    schedule = json.load(f)
```

**–ó–∞–ø–∏—Å—å**:
```python
with open("schedule.json", "w", encoding="utf-8") as f:
    json.dump(schedule, f, ensure_ascii=False, indent=2)
```

### 6.3 –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### 6.3.1 Email –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```python
from services.email_service import EmailService

email_service = EmailService()
success = email_service.send_alert("–ó–∞–≥–æ–ª–æ–≤–æ–∫", "–°–æ–æ–±—â–µ–Ω–∏–µ")
```

#### 6.3.2 –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–∑–∞–≥–ª—É—à–∫–∞)
–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç —ç–º—É–ª—è—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ:
```python
def _run_server(self):
    while self.running:
        threading.Event().wait(1)  # –≠–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã
```

---

## 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ <a name="–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ"></a>

### 7.1 –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### 7.1.1 –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```python
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
logging_service.info("COMPONENT", "–°–æ–æ–±—â–µ–Ω–∏–µ")

# –ü—Ä–∏–º–µ—Ä—ã:
logging_service.info("SYSTEM", "üöÄ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
logging_service.info("DEVICE", f"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ {name} –∏–∑–º–µ–Ω–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ")
logging_service.info("CLIENT", "–ü–æ–¥–∫–ª—é—á–µ–Ω –Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç")
```

#### 7.1.2 –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
```python
# –ü–æ —Ç–∏–ø—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
system_logs = logging_service.get_logs("SYSTEM", limit=50)
device_logs = logging_service.get_logs("DEVICE", limit=50)

# –í—Å–µ –ª–æ–≥–∏
all_logs = logging_service.get_all_logs()

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
stats = logging_service.get_log_statistics()
print(f"–í—Å–µ–≥–æ –ª–æ–≥–æ–≤: {stats['total_logs']}")
```

#### 7.1.3 –õ–æ–≥–∏ –∏–∑ —Ñ–∞–π–ª–∞
```python
# –ß—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞ (–¥–æ 200 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π)
file_logs = logging_service.read_logs_from_file(limit=200)
```

### 7.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### 7.2.1 –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
```python
devices_status = device_manager.get_all_devices_status()

# –ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
total = len(devices_status)
online = sum(1 for s in devices_status.values() if s.get("online"))
active = sum(1 for s in devices_status.values() if s.get("state") == "on")
```

#### 7.2.2 –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
history = device_manager.get_device_state_history("device_id", limit=10)

for entry in history:
    print(f"{entry['timestamp']}: {entry['state']}")
```

#### 7.2.3 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
notifications = notification_service.notifications
unread = notification_service.get_unread_notifications()

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
notification_service.mark_as_read(notification_id)
notification_service.delete_notification(notification_id)
notification_service.clear_notifications()
```

### 7.3 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### 7.3.1 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ç–æ–∫–æ–≤
```python
import threading

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Ç–æ–∫–∞—Ö
threads = threading.enumerate()
print(f"–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤: {len(threads)}")

for thread in threads:
    print(f"  {thread.name}: {thread.is_alive()}")
```

#### 7.3.2 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
```python
import psutil
import os

process = psutil.Process(os.getpid())
memory_usage = process.memory_info().rss / 1024 / 1024  # –ú–ë
print(f"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: {memory_usage:.2f} –ú–ë")
```

---

## 8. –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è <a name="—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ-–∏-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"></a>

### 8.1 –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

#### 8.1.1 –ß–µ—Ä–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ"
2. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
   - –î–µ–π—Å—Ç–≤–∏–µ
   - –î–Ω–∏ –Ω–µ–¥–µ–ª–∏
   - –°—Ç–∞—Ç—É—Å (–≤–∫–ª—é—á–µ–Ω–æ/–≤—ã–∫–ª—é—á–µ–Ω–æ)

#### 8.1.2 –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
```python
from services.schedule_service import ScheduleService

schedule_service = controller.schedule_service

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
success = schedule_service.add_task(
    time_str="08:00",                    # –í—Ä–µ–º—è
    device_id="lamp_living_room",        # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
    action="on",                         # –î–µ–π—Å—Ç–≤–∏–µ
    days=[0, 1, 2, 3, 4],               # –ü–Ω-–ü—Ç
    enabled=True                         # –ê–∫—Ç–∏–≤–Ω–∞
)

# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
schedule_service.add_task(
    time_str="22:00",
    device_id="thermostat",
    action="on_and_set_temperature:18",  # –í–∫–ª—é—á–∏—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
    days=[0, 1, 2, 3, 4, 5, 6],         # –í—Å–µ –¥–Ω–∏
    enabled=True
)
```

### 8.2 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏

#### 8.2.1 –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á
tasks = schedule_service.get_all_tasks()

for task in tasks:
    print(f"{task['time']}: {task['device_id']} -> {task['action']}")
```

#### 8.2.2 –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
```python
# –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
schedule_service.toggle_task("08:00", task_index=0, enabled=False)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
schedule_service.update_task(
    old_time="08:00",
    task_index=0,
    new_time="08:30",
    new_device_id="thermostat",
    new_action="on",
    new_days=[0, 1, 2, 3, 4],
    new_enabled=True
)
```

#### 8.2.3 –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
```python
# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏
schedule_service.remove_task("08:00", task_index=0)

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
schedule_service.remove_task("08:00")
```

### 8.3 –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### 8.3.1 –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
```python
# –í–µ—á–µ—Ä–Ω–∏–π —Ä–µ–∂–∏–º
automation_service.run_evening_scenario()

# –£—Ç—Ä–µ–Ω–Ω–∏–π —Ä–µ–∂–∏–º
automation_service.run_morning_scenario()

# –†–µ–∂–∏–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
automation_service.run_away_scenario()

# –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
automation_service.run_full_demo()
```

#### 8.3.2 –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
```python
class CustomAutomation:
    def __init__(self, controller):
        self.controller = controller
    
    def custom_scenario(self):
        """–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π"""
        steps = [
            ("lamp_living_room", "on", "–í–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞"),
            ("thermostat", "on", "–í–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–æ–ø–ª–µ–Ω–∏—è"),
            ("security_camera", "on", "–í–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã"),
        ]
        
        for device_id, action, description in steps:
            print(f"–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: {description}")
            self.controller.device_manager.send_command(device_id, action)
            time.sleep(1)
        
        print("–°—Ü–µ–Ω–∞—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω!")
```

---

## 9. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è <a name="—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è-–∏-–æ–ø–æ–≤–µ—â–µ–Ω–∏—è"></a>

### 9.1 –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### 9.1.1 –°–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```python
# –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
notification_service.add_notification(
    title="–ó–∞–≥–æ–ª–æ–≤–æ–∫",
    message="–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",
    level="info"  # info, warning, error
)

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö
# - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
# - –°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤
# - –û—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º—ã
```

#### 9.1.2 –£—Ä–æ–≤–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **info**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **warning**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **error**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

### 9.2 Email-–æ–ø–æ–≤–µ—â–µ–Ω–∏—è

#### 9.2.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP
1. –î–ª—è Gmail:
   - –í–∫–ª—é—á–∏—Ç–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

2. –î–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
   - –£–∫–∞–∂–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π SMTP —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ—Ä—Ç
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### 9.2.2 –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
```python
# –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –¥–∞—Ç—á–∏–∫–∞
if device_type in ["smoke", "water"]:
    email_service.send_alert(
        f"üö® –¢—Ä–µ–≤–æ–≥–∞: {device.name}",
        f"–î–∞—Ç—á–∏–∫ '{device.name}' —Å—Ä–∞–±–æ—Ç–∞–ª.\n–¢–∏–ø: {device_type}\n–í—Ä–µ–º—è: {datetime.now()}"
    )
```

#### 9.2.3 –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è email
```python
def send_custom_email(subject, body, receiver=None):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ email"""
    if receiver is None:
        receiver = email_service.receiver_email
    
    msg = MIMEMultipart()
    msg["From"] = email_service.sender_email
    msg["To"] = receiver
    msg["Subject"] = subject
    
    msg.attach(MIMEText(body, "plain", "utf-8"))
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ SMTP
    # ...
```

### 9.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### 9.3.1 Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```python
import requests

def send_webhook(url, data):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ webhook"""
    try:
        response = requests.post(url, json=data, timeout=5)
        return response.status_code == 200
    except Exception as e:
        logging_service.error("SYSTEM", f"Webhook error: {e}")
        return False

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
webhook_data = {
    "device_id": device_id,
    "event": event_type,
    "timestamp": datetime.now().isoformat(),
    "data": event_data
}
send_webhook("https://api.example.com/webhook", webhook_data)
```

#### 9.3.2 Telegram-–±–æ—Ç
```python
import telebot

class TelegramNotifier:
    def __init__(self, token, chat_id):
        self.bot = telebot.TeleBot(token)
        self.chat_id = chat_id
    
    def send_notification(self, message):
        try:
            self.bot.send_message(self.chat_id, message)
            return True
        except Exception as e:
            print(f"Telegram error: {e}")
            return False

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
telegram = TelegramNotifier("YOUR_BOT_TOKEN", "YOUR_CHAT_ID")
telegram.send_notification(f"üö® –°—Ä–∞–±–æ—Ç–∞–ª –¥–∞—Ç—á–∏–∫: {device_name}")
```

---

## 10. –û—Ç–ª–∞–¥–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π <a name="–æ—Ç–ª–∞–¥–∫–∞-–∏-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π"></a>

### 10.1 –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 10.1.1 –°–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Python 3.8+
2. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`pip install -r requirements.txt`)
3. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –ø—Ä–∞–≤ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
4. –ù–µ –∑–∞–Ω—è—Ç—ã –ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã

**–õ–æ–≥–∏**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `logs/smart_home.log` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

#### 10.1.2 –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ `DeviceManager`
2. –ù–∞–ª–∏—á–∏–µ –º–µ—Ç–æ–¥–æ–≤ `turn_on()`, `turn_off()`, `toggle()` –≤ –∫–ª–∞—Å—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
3. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `device_id` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–∞–Ω–¥

**–û—Ç–ª–∞–¥–∫–∞**:
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
device = device_manager.get_device("device_id")
if device:
    print(f"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–æ: {device.name}")
    print(f"–°–æ—Å—Ç–æ—è–Ω–∏–µ: {device.state}")
    print(f"–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: {device.capabilities}")
else:
    print("–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!")
```

#### 10.1.3 Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å SMTP –Ω–∞—Å—Ç—Ä–æ–µ–∫
2. –ü–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è Gmail
3. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å SMTP —Å–µ—Ä–≤–µ—Ä–∞
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞

**–¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏**:
```python
# –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
success = email_service.send_alert("–¢–µ—Å—Ç", "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
print(f"–û—Ç–ø—Ä–∞–≤–∫–∞ {'—É—Å–ø–µ—à–Ω–∞' if success else '–Ω–µ —É–¥–∞–ª–∞—Å—å'}")
```

### 10.2 –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏

#### 10.2.1 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏
```python
# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
import logging
logging.basicConfig(level=logging.DEBUG)

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
device_logger = logging.getLogger("devices")
device_logger.setLevel(logging.DEBUG)
```

#### 10.2.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
```python
# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
def debug_event_handler(data):
    print(f"[DEBUG] –°–æ–±—ã—Ç–∏–µ: {data}")

event_bus.subscribe(EventBus.DEVICE_STATE_CHANGED, debug_event_handler)
event_bus.subscribe(EventBus.NOTIFICATION_CREATED, debug_event_handler)
event_bus.subscribe(EventBus.SYSTEM_ERROR, debug_event_handler)
```

#### 10.2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ç–æ–∫–æ–≤
```python
import threading
import time

def thread_monitor():
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤"""
    while True:
        print("\n" + "="*50)
        print(f"–í—Ä–µ–º—è: {time.strftime('%H:%M:%S')}")
        print(f"–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤: {threading.active_count()}")
        
        for thread in threading.enumerate():
            print(f"  {thread.name}: {'–ê–∫—Ç–∏–≤–µ–Ω' if thread.is_alive() else '–ù–µ –∞–∫—Ç–∏–≤–µ–Ω'}")
        
        time.sleep(10)

# –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
monitor_thread = threading.Thread(target=thread_monitor, daemon=True)
monitor_thread.start()
```

### 10.3 –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤

#### 10.3.1 –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
```python
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
device_manager.restore_state()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
states = device_manager.state_storage.load()
print(f"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π: {len(states)}")
```

#### 10.3.2 –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
```python
import os
import shutil

def clear_cache():
    """–û—á–∏—Å—Ç–∫–∞ –∫—ç—à-—Ñ–∞–π–ª–æ–≤ —Å–∏—Å—Ç–µ–º—ã"""
    cache_files = [
        "device_state.json",
        "schedule.json",
        "logs/smart_home.log"
    ]
    
    for file in cache_files:
        if os.path.exists(file):
            try:
                os.remove(file)
                print(f"–£–¥–∞–ª–µ–Ω: {file}")
            except Exception as e:
                print(f"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è {file}: {e}")
    
    print("–ö—ç—à –æ—á–∏—â–µ–Ω!")
```

#### 10.3.3 –°–±—Ä–æ—Å –∫ –∑–∞–≤–æ–¥—Å–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
```python
def factory_reset():
    """–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã"""
    import json
    
    # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    with open("data/device_state.json", "w") as f:
        json.dump({}, f)
    
    # –°–±—Ä–æ—Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
    with open("schedule.json", "w") as f:
        json.dump({}, f)
    
    # –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
    open("logs/smart_home.log", "w").close()
    
    print("–ó–∞–≤–æ–¥—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!")
```

### 10.4 –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 10.4.1 –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```python
import time
import cProfile
import pstats

def profile_function(func, *args, **kwargs):
    """–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏"""
    profiler = cProfile.Profile()
    profiler.enable()
    
    start_time = time.time()
    result = func(*args, **kwargs)
    end_time = time.time()
    
    profiler.disable()
    
    print(f"–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {end_time - start_time:.4f} —Å–µ–∫")
    
    # –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    stats = pstats.Stats(profiler)
    stats.sort_stats('cumulative')
    stats.print_stats(10)
    
    return result

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
profile_function(device_manager.send_command, "lamp_living_room", "on")
```

#### 10.4.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏
```python
import tracemalloc

def monitor_memory():
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏"""
    tracemalloc.start()
    
    # –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
    
    snapshot = tracemalloc.take_snapshot()
    top_stats = snapshot.statistics('lineno')
    
    print("[ –¢–æ–ø 10 –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–∞–º—è—Ç–∏ ]")
    for stat in top_stats[:10]:
        print(stat)
    
    tracemalloc.stop()
```

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥

### A.1 –ó–∞–ø—É—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ GUI
python main.py

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
python -m ui.console_interface

# –ó–∞–ø—É—Å–∫ —Å –æ—Ç–ª–∞–¥–∫–æ–π
python -m pdb main.py
```

### A.2 –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Python
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
controller.running  # True –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
devices = controller.device_manager.devices

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
controller.device_manager.save_state()

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
logs = controller.logging_service.get_all_logs()
```

### A.3 –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
```python
# –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã
success = controller.send_command("lamp_living_room", "toggle")
print(f"–ö–æ–º–∞–Ω–¥–∞ {'—É—Å–ø–µ—à–Ω–∞' if success else '–Ω–µ —É–¥–∞–ª–∞—Å—å'}")

# –¢–µ—Å—Ç email
success = controller.email_service.send_alert("–¢–µ—Å—Ç", "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
tasks = controller.schedule_service.get_all_tasks()
```

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

```
smart-home-system/
‚îú‚îÄ‚îÄ core/                    # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ home_controller.py   # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ
‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ settings.py         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
‚îÇ
‚îú‚îÄ‚îÄ devices/                 # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ base_device.py      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ lighting/           # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Å–≤–µ—â–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ smart_light.py
‚îÇ   ‚îú‚îÄ‚îÄ climate/            # –ö–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ thermostat.py
‚îÇ   ‚îî‚îÄ‚îÄ security/           # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ security_camera.py
‚îÇ       ‚îú‚îÄ‚îÄ smoke_sensor.py
‚îÇ       ‚îî‚îÄ‚îÄ water_leak_sensor.py
‚îÇ
‚îú‚îÄ‚îÄ services/               # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ device_manager.py   # –ú–µ–Ω–µ–¥–∂–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îÇ   ‚îú‚îÄ‚îÄ event_bus.py        # –®–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ logging_service.py  # –°–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ notification_service.py # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ schedule_service.py # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ automation_service.py # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ email_service.py    # Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ storage_service.py  # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ ui/                     # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ smart_home_gui.py   # –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ console_interface.py # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ
‚îú‚îÄ‚îÄ data/                   # –î–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ device_state.json   # –°–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îÇ
‚îú‚îÄ‚îÄ logs/                   # –õ–æ–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ smart_home.log
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_devices.py
‚îÇ
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ schedule.json           # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ C: –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### C.1 –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```python
from devices.base_device import BaseDevice
import random

class SmartBlinds(BaseDevice):
    """–£–º–Ω—ã–µ –∂–∞–ª—é–∑–∏"""
    
    def __init__(self, device_id, name):
        super().__init__(device_id, name, "blinds")
        
        self.data["position"] = 0  # 0-100%
        self.data["tilt"] = 0      # -45 to 45 –≥—Ä–∞–¥—É—Å–æ–≤
        
        self.capabilities.extend(["set_position", "set_tilt"])
        
        self.metadata.update({
            "min_position": 0,
            "max_position": 100,
            "min_tilt": -45,
            "max_tilt": 45
        })
    
    def turn_on(self):
        self.state = "on"
        self.emit_event("state_changed", {"state": "on"})
        return True
    
    def turn_off(self):
        self.state = "off"
        self.emit_event("state_changed", {"state": "off"})
        return True
    
    def toggle(self):
        if self.state == "on":
            return self.turn_off()
        else:
            return self.turn_on()
    
    def set_position(self, position):
        if self.metadata["min_position"] <= position <= self.metadata["max_position"]:
            self.data["position"] = position
            self.emit_event("position_changed", {"position": position})
            return True
        return False
    
    def set_tilt(self, tilt):
        if self.metadata["min_tilt"] <= tilt <= self.metadata["max_tilt"]:
            self.data["tilt"] = tilt
            self.emit_event("tilt_changed", {"tilt": tilt})
            return True
        return False
    
    def _simulate_sunlight(self):
        """–°–∏–º—É–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫"""
        if self.state == "on":
            hour = datetime.now().hour
            
            if 6 <= hour <= 18:  # –î–µ–Ω—å
                target_position = random.randint(30, 70)
                target_tilt = random.randint(-30, 30)
            else:  # –ù–æ—á—å
                target_position = random.randint(0, 30)
                target_tilt = 0
            
            # –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
            current_pos = self.data["position"]
            diff = target_position - current_pos
            change = diff * 0.1
            new_pos = max(0, min(100, current_pos + change))
            
            if abs(change) > 1:
                self.set_position(int(new_pos))
                self.set_tilt(target_tilt)
```

### C.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º API
```python
import requests
from threading import Thread

class WeatherIntegration:
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–≥–æ–¥–Ω—ã–º API"""
    
    def __init__(self, api_key, controller):
        self.api_key = api_key
        self.controller = controller
        self.weather_data = {}
        self.update_interval = 1800  # 30 –º–∏–Ω—É—Ç
    
    def start_monitoring(self):
        """–ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–≥–æ–¥—ã"""
        def update_weather():
            while True:
                self.fetch_weather()
                time.sleep(self.update_interval)
        
        thread = Thread(target=update_weather, daemon=True)
        thread.start()
    
    def fetch_weather(self):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ"""
        try:
            response = requests.get(
                f"https://api.openweathermap.org/data/2.5/weather",
                params={
                    "q": "Moscow",
                    "appid": self.api_key,
                    "units": "metric"
                },
                timeout=10
            )
            
            if response.status_code == 200:
                data = response.json()
                self.weather_data = {
                    "temperature": data["main"]["temp"],
                    "humidity": data["main"]["humidity"],
                    "conditions": data["weather"][0]["main"]
                }
                
                # –ê–¥–∞–ø—Ç–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–¥ –ø–æ–≥–æ–¥—É
                self.adapt_to_weather()
                
                return True
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã: {e}")
        
        return False
    
    def adapt_to_weather(self):
        """–ê–¥–∞–ø—Ç–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–¥ –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è"""
        temp = self.weather_data.get("temperature")
        
        if temp is not None:
            if temp < 18:  # –•–æ–ª–æ–¥–Ω–æ
                self.controller.send_command("thermostat", "on_and_set_temperature:22")
            elif temp > 25:  # –ñ–∞—Ä–∫–æ
                self.controller.send_command("thermostat", "off")
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ "–£–º–Ω—ã–π –î–æ–º". –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –Ω–æ–≤—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å–∏—Å—Ç–µ–º—ã.

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 1.0.5
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –î–µ–∫–∞–±—Ä—å 2025  
**–ê–≤—Ç–æ—Ä**: –°–∏—Å—Ç–µ–º–∞ "–£–º–Ω—ã–π –î–æ–º"
